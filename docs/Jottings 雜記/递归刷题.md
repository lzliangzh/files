---
date: 2024-03-09
authors:
  - lzliangzh
tags: 
  - 編程學習
---

# 递归刷题

《数据结构与算法 B》递归题目练习

<!-- more -->

## [面试题 08.05. 递归乘法](https://leetcode.cn/problems/recursive-mulitply-lcci/)

递归乘法。 写一个递归函数，不使用 * 运算符， 实现两个正整数的相乘。可以使用加号、减号、位移，但要吝啬一些。

**示例1:**

```
 输入：A = 1, B = 10
 输出：10
```

**示例2:**

```
 输入：A = 3, B = 4
 输出：12
```

**提示:**

1. 保证乘法范围不会溢出



### 递归方法

1. **结束条件**：当 B = 1 的时候，直接返回 A
2. **减小问题规模**：当 B ≠ 1 的时候，若 B 为偶数，则考虑返回 `self.multiply(A, B//2) * 2`，若 B 为奇数，则考虑返回 `self.multiply(A, B//2) * 2 + A`，不断二分。

```python
class Solution:
    def multiply(self, A: int, B: int) -> int:
        if B == 0:
            return 0
        elif B == 1:
            return A
        else:
            if B % 2 == 0:
                return self.multiply(A, B//2) * 2
            else:
                return self.multiply(A, B//2) * 2 + A
        
```

### 位运算+递归

计算机并非没有乘法运算，只是只有 2 的乘（除）法运算，即向左（右）移位。考虑到这一点后，我们的目标就是，把一个因数表示成 2 的幂次（这有点困难）。再转换一下思路，利用计算机自带的乘法运算，可以将 A  的各位递归地乘到 B 上，减小 A 的规模。

* A是双数的情况，即 bin(A) 除最高位外均为 0 。结果为：`(A//2)×B×2`。（也就是：`(A>>1)×(B<<1)`）
* A是单数的情况，即 bin(A) 除最高位外有位为 1 。逢 1 即逢 A 减小为单数，此时结果为：`(A//2)×B×2+B`。（也就是：`(A>>1)×(B<<1)+B`）

```python
class Solution:
    def multiply(self, A: int, B: int) -> int:
        if A == 0:
            return 0
        p = self.multiply(A >> 1, B)
        if A % 2:
            return B + p + p
        else:
            return p + p
```

处理**「位移的关键是找到乘数 b 如何拆解为 2 的幂，这里要递归拆解」** 







